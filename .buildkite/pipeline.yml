steps:
  - label: "ğŸ”¬ Science Lab - Package Audit"
    command: |
      nix develop .#default --command bash -c "
        ./install_science_packages.sh
      "
    agents:
      queue: "science"
  
  - label: "ğŸ”· Monster Group - GAP Tests"
    command: |
      nix develop .#monster --command bash -c "
        gap --version
        echo 'Testing Monster order...'
        gap -c 'LoadPackage(\"atlasrep\"); Print(Size(AtlasGroup(\"M\")));'
      "
    agents:
      queue: "science"
  
  - label: "ğŸ”· Monster Proofs - Lean4"
    command: |
      nix develop .#monster --command bash -c "
        lean --version
        lake build MonsterProofs
        lake build SimpleExprMonster
        lake build MetaCoqMonsterProof
      "
    agents:
      queue: "science"
  
  - label: "ğŸ”· Monster Optimization - MiniZinc"
    command: |
      nix develop .#monster --command bash -c "
        minizinc --version
        timeout 30 minizinc monster_symmetry_optimizer.mzn
        timeout 30 minizinc simpleexpr_monster.mzn
        timeout 30 minizinc metacoq_monster_proof.mzn
      "
    agents:
      queue: "science"
  
  - label: "ğŸŒˆ Maass Spectrum Analysis"
    command: |
      nix develop .#default --command bash -c "
        ./maass_spectrum_quick.sh
        ./maass_spectrogram.sh
      "
    agents:
      queue: "science"
  
  - label: "ğŸ” Shard Analysis"
    command: |
      nix develop .#default --command bash -c "
        ./run_shard_arrows.sh SimpleExprMonster.lean
        ./analyze_all_lean.sh
        ./analyze_arrows.sh
      "
    agents:
      queue: "science"
  
  - label: "ğŸ§ª Science Advisors - Integration Test"
    command: |
      nix develop .#monster --command bash -c "
        lake build ScienceAdvisors
        lake build MonsterSymmetryOptimizer
        lake build SciencePackages
      "
    agents:
      queue: "science"
  
  - label: "ğŸ“¦ Build Science Lab Container"
    command: |
      nix build .#scienceLabContainer
      docker load < result
      docker run --rm tradewars-science-lab:latest gap --version
    agents:
      queue: "docker"
  
  - label: "ğŸš€ Deploy to TradeWars Ship"
    command: |
      nix develop .#monster --command bash -c "
        echo 'ğŸš€ Deploying science lab to TradeWars ship...'
        echo 'âœ“ GAP: Monster group computations'
        echo 'âœ“ Lean4: Formal proofs'
        echo 'âœ“ MiniZinc: Symmetry optimization'
        echo 'âœ“ Z3: SMT solving'
        echo 'âœ“ Python: Numerical analysis'
        echo 'âˆ´ Science lab operational âœ“'
      "
    agents:
      queue: "deploy"
