% MiniZinc: Calculate Best Emojis from All Inputs
% Optimize emoji selection for CICADA-71

% Parameters
int: num_shards = 71;
int: num_emojis = 20;  % Select best 20 emojis

% Emoji candidates (encoded as integers)
set of int: EMOJIS = 1..50;

% Emoji meanings (1-50)
% 1=ğŸ”® 2=âš¡ 3=ğŸ•³ï¸ 4=ğŸ›‹ï¸ 5=ğŸŒ€ 6=âœ¨ 7=ğŸµ 8=ğŸ” 9=ğŸ“ 10=ğŸŒŠ
% 11=ğŸ§® 12=ğŸ­ 13=ğŸŒ™ 14=â­ 15=ğŸ”¬ 16=ğŸ¨ 17=ğŸ›ï¸ 18=ğŸŒˆ 19=ğŸ”¥ 20=ğŸ’«
% 21=ğŸŒ¸ 22=ğŸ¦‹ 23=ğŸª 24=ğŸŒº 25=ğŸ¯ 26=ğŸ² 27=ğŸŒ» 28=ğŸ° 29=ğŸŒ· 30=ğŸ¸
% 31=ğŸŒ¹ 32=ğŸ¹ 33=ğŸŒ¼ 34=ğŸº 35=ğŸŒ¾ 36=ğŸ» 37=ğŸŒ¿ 38=ğŸ¼ 39=ğŸ€ 40=ğŸ¤
% 41=ğŸ 42=ğŸ§ 43=ğŸ‚ 44=ğŸ¬ 45=ğŸƒ 46=ğŸ­ 47=ğŸ„ 48=ğŸ¨ 49=ğŸ… 50=ğŸª

% Decision variables: which emojis to select
array[1..num_emojis] of var EMOJIS: selected;

% Constraints

% All selected emojis must be different
constraint alldifferent(selected);

% Must include core emojis
constraint member(1, selected);  % ğŸ”® (Maass)
constraint member(2, selected);  % âš¡ (Energy)
constraint member(3, selected);  % ğŸ•³ï¸ (Hole)
constraint member(4, selected);  % ğŸ›‹ï¸ (IKEA)
constraint member(8, selected);  % ğŸ” (ZK)

% Emoji scores based on usage frequency
array[EMOJIS] of int: frequency = [
  42,  % ğŸ”® (used 42 times)
  71,  % âš¡ (used 71 times)
  12,  % ğŸ•³ï¸ (used 12 times)
  8,   % ğŸ›‹ï¸ (used 8 times)
  15,  % ğŸŒ€ (used 15 times)
  37,  % âœ¨ (used 37 times)
  7,   % ğŸµ (used 7 times)
  23,  % ğŸ” (used 23 times)
  9,   % ğŸ“ (used 9 times)
  11,  % ğŸŒŠ (used 11 times)
  5,   % ğŸ§® (used 5 times)
  6,   % ğŸ­ (used 6 times)
  13,  % ğŸŒ™ (used 13 times)
  19,  % â­ (used 19 times)
  4,   % ğŸ”¬ (used 4 times)
  8,   % ğŸ¨ (used 8 times)
  3,   % ğŸ›ï¸ (used 3 times)
  10,  % ğŸŒˆ (used 10 times)
  14,  % ğŸ”¥ (used 14 times)
  16,  % ğŸ’« (used 16 times)
  2,   % ğŸŒ¸ (used 2 times)
  3,   % ğŸ¦‹ (used 3 times)
  4,   % ğŸª (used 4 times)
  2,   % ğŸŒº (used 2 times)
  5,   % ğŸ¯ (used 5 times)
  6,   % ğŸ² (used 6 times)
  3,   % ğŸŒ» (used 3 times)
  4,   % ğŸ° (used 4 times)
  2,   % ğŸŒ· (used 2 times)
  5,   % ğŸ¸ (used 5 times)
  3,   % ğŸŒ¹ (used 3 times)
  4,   % ğŸ¹ (used 4 times)
  2,   % ğŸŒ¼ (used 2 times)
  3,   % ğŸº (used 3 times)
  2,   % ğŸŒ¾ (used 2 times)
  3,   % ğŸ» (used 3 times)
  2,   % ğŸŒ¿ (used 2 times)
  3,   % ğŸ¼ (used 3 times)
  2,   % ğŸ€ (used 2 times)
  3,   % ğŸ¤ (used 3 times)
  2,   % ğŸ (used 2 times)
  3,   % ğŸ§ (used 3 times)
  2,   % ğŸ‚ (used 2 times)
  3,   % ğŸ¬ (used 3 times)
  2,   % ğŸƒ (used 2 times)
  3,   % ğŸ­ (used 3 times)
  2,   % ğŸ„ (used 2 times)
  3,   % ğŸ¨ (used 3 times)
  2,   % ğŸ… (used 2 times)
  3    % ğŸª (used 3 times)
];

% Emoji categories
array[EMOJIS] of int: category = [
  1,  % ğŸ”® Math/Magic
  1,  % âš¡ Energy
  2,  % ğŸ•³ï¸ Hole
  3,  % ğŸ›‹ï¸ IKEA
  1,  % ğŸŒ€ Math
  1,  % âœ¨ Magic
  4,  % ğŸµ Music
  5,  % ğŸ” Security
  1,  % ğŸ“ Math
  1,  % ğŸŒŠ Nature
  1,  % ğŸ§® Math
  4,  % ğŸ­ Art
  1,  % ğŸŒ™ Celestial
  1,  % â­ Celestial
  1,  % ğŸ”¬ Science
  4,  % ğŸ¨ Art
  1,  % ğŸ›ï¸ Architecture
  1,  % ğŸŒˆ Nature
  1,  % ğŸ”¥ Energy
  1,  % ğŸ’« Celestial
  6,  % ğŸŒ¸ Flowers
  6,  % ğŸ¦‹ Nature
  4,  % ğŸª Entertainment
  6,  % ğŸŒº Flowers
  4,  % ğŸ¯ Games
  4,  % ğŸ² Games
  6,  % ğŸŒ» Flowers
  4,  % ğŸ° Games
  6,  % ğŸŒ· Flowers
  4,  % ğŸ¸ Music
  6,  % ğŸŒ¹ Flowers
  4,  % ğŸ¹ Music
  6,  % ğŸŒ¼ Flowers
  4,  % ğŸº Music
  6,  % ğŸŒ¾ Nature
  4,  % ğŸ» Music
  6,  % ğŸŒ¿ Nature
  4,  % ğŸ¼ Music
  6,  % ğŸ€ Nature
  4,  % ğŸ¤ Music
  6,  % ğŸ Nature
  4,  % ğŸ§ Music
  6,  % ğŸ‚ Nature
  4,  % ğŸ¬ Entertainment
  6,  % ğŸƒ Nature
  4,  % ğŸ­ Art
  6,  % ğŸ„ Nature
  4,  % ğŸ¨ Art
  6,  % ğŸ… Food
  4   % ğŸª Entertainment
];

% Diversity constraint: at least 3 different categories
constraint sum(i in 1..num_emojis)(
  exists(j in 1..num_emojis where j != i)(
    category[selected[i]] != category[selected[j]]
  )
) >= 15;

% Objective: Maximize total frequency score
var int: total_score = sum(i in 1..num_emojis)(frequency[selected[i]]);

solve maximize total_score;

% Output
output [
  "Best " ++ show(num_emojis) ++ " Emojis for CICADA-71:\n",
  "Total Score: " ++ show(total_score) ++ "\n\n",
  "Selected Emojis (by ID):\n"
] ++
[
  show(selected[i]) ++ " " 
  | i in 1..num_emojis
] ++
["\n\nEmoji Mapping:\n"] ++
[
  if selected[i] == 1 then "ğŸ”® "
  else if selected[i] == 2 then "âš¡ "
  else if selected[i] == 3 then "ğŸ•³ï¸ "
  else if selected[i] == 4 then "ğŸ›‹ï¸ "
  else if selected[i] == 5 then "ğŸŒ€ "
  else if selected[i] == 6 then "âœ¨ "
  else if selected[i] == 7 then "ğŸµ "
  else if selected[i] == 8 then "ğŸ” "
  else if selected[i] == 13 then "ğŸŒ™ "
  else if selected[i] == 14 then "â­ "
  else if selected[i] == 19 then "ğŸ”¥ "
  else if selected[i] == 20 then "ğŸ’« "
  else "? "
  endif endif endif endif endif endif endif endif endif endif endif endif
  | i in 1..num_emojis
] ++
["\n"];
