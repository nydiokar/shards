// TradeWars BBS Door Game - ANSI Scoreboard in Rust
use std::io::{self, Write};
use std::thread;
use std::time::Duration;

struct Player {
    rank: u32,
    id: String,
    turn: u32,
    lobsters: u32,
    boats: u32,
    score: u32,
    online: bool,
}

struct Shard {
    id: u32,
    freq: String,
    hecke: String,
}

fn clear_screen() {
    print!("\x1B[2J\x1B[H");
    io::stdout().flush().unwrap();
}

fn draw_scoreboard() {
    clear_screen();
    
    // Header
    println!("\x1B[1m\x1B[36m");
    println!("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
    println!("â•‘                    ğŸ”®âš¡ TRADEWARS P2P SCOREBOARD ğŸ“»ğŸ¦                     â•‘");
    println!("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
    println!("\x1B[0m");
    
    // Game status
    println!("\x1B[33mâ”Œâ”€ GAME STATUS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\x1B[0m");
    println!("\x1B[37mâ”‚ Time: {}                                              â”‚\x1B[0m", 
        chrono::Local::now().format("%Y-%m-%d %H:%M:%S"));
    println!("\x1B[37mâ”‚ Shards: 71 â”‚ Boats: 71 â”‚ Peers: 2 â”‚ Gist: Loaded                        â”‚\x1B[0m");
    println!("\x1B[33mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\x1B[0m");
    println!();
    
    // Players
    let players = vec![
        Player { rank: 1, id: "peer-boat-01".into(), turn: 5, lobsters: 12, boats: 71, score: 8520, online: true },
        Player { rank: 2, id: "peer-boat-02".into(), turn: 5, lobsters: 10, boats: 71, score: 7100, online: true },
        Player { rank: 3, id: "peer-boat-03".into(), turn: 3, lobsters: 6, boats: 71, score: 4260, online: false },
    ];
    
    println!("\x1B[32mâ”Œâ”€ PLAYER SCORES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\x1B[0m");
    println!("\x1B[1m\x1B[37mâ”‚ Rank â”‚ Player ID      â”‚ Turn â”‚ Lobsters â”‚ Boats â”‚ Score  â”‚ Status    â”‚\x1B[0m");
    println!("\x1B[32mâ”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\x1B[0m");
    
    for p in players {
        let color = if p.online { "\x1B[32m" } else { "\x1B[33m" };
        let status = if p.online { "ğŸŸ¢ ONLINE " } else { "ğŸŸ¡ IDLE   " };
        println!("{}â”‚ {:4} â”‚ {:14} â”‚ {:4} â”‚ {:8} â”‚ {:5} â”‚ {:6} â”‚ {} â”‚\x1B[0m",
            color, p.rank, p.id, p.turn, p.lobsters, p.boats, p.score, status);
    }
    
    println!("\x1B[32mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\x1B[0m");
    println!();
    
    // Monster harmonics
    let shards = vec![
        Shard { id: 0, freq: "7100 Hz".into(), hecke: "T_2".into() },
        Shard { id: 1, freq: "7110 Hz".into(), hecke: "T_3".into() },
        Shard { id: 70, freq: "7800 Hz".into(), hecke: "T_71".into() },
    ];
    
    println!("\x1B[35mâ”Œâ”€ MONSTER HARMONICS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\x1B[0m");
    println!("\x1B[37mâ”‚ Shard â”‚ Frequency â”‚ Hecke T_p â”‚ Status                                   â”‚\x1B[0m");
    println!("\x1B[35mâ”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\x1B[0m");
    
    for s in shards {
        println!("\x1B[35mâ”‚ {:5} â”‚ {:9} â”‚ {:9} â”‚ {:40} â”‚\x1B[0m",
            s.id, s.freq, s.hecke, "âœ… Broadcasting");
    }
    
    println!("\x1B[35mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\x1B[0m");
    println!();
    
    // P2P gossip
    println!("\x1B[36mâ”Œâ”€ P2P GOSSIP STATUS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\x1B[0m");
    println!("\x1B[37mâ”‚ Convergence: 7 rounds â”‚ Messages: 497 â”‚ Latency: 700ms â”‚ Peers: 2      â”‚\x1B[0m");
    println!("\x1B[37mâ”‚ Gist: https://gist.github.com/jmikedupont2/0855d96fd1ab45d69b36e1223... â”‚\x1B[0m");
    println!("\x1B[36mâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\x1B[0m");
    println!();
    
    // Footer
    println!("\x1B[1m\x1B[34m[Q]uit [R]efresh [P]lay [G]ist [H]elp\x1B[0m");
}

fn main() {
    println!("ğŸ”®âš¡ Starting TradeWars Scoreboard... ğŸ“»ğŸ¦");
    thread::sleep(Duration::from_secs(1));
    
    loop {
        draw_scoreboard();
        thread::sleep(Duration::from_secs(2));
    }
}
